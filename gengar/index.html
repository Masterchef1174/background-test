<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Gengar Clock</title>
  <style>
    :root{
      --time-size: 86px;
      --date-size: 24px;
      --time-weight: 700;
      --date-weight: 600;
      --glow: 18px;

      --x: 8%;
      --y: 12%;

      --text: rgba(255,255,255,.96);
      --shadow: rgba(0,0,0,.55);
      --stroke: rgba(0,0,0,.35);
      --stroke-w: 1.2px;

      --plate: rgba(0,0,0,.10);
      --plate-border: rgba(255,255,255,.10);
      --plate-radius: 22px;
      --plate-pad-x: 18px;
      --plate-pad-y: 14px;

      --video-dim: .98;
      --video-sat: 1.05;
      --video-contrast: 1.05;
      --video-blur: 0px;
    }

    html,body{
      height:100%;
      margin:0;
      overflow:hidden;
      background:#000;
    }

    .stage{
      position:absolute; inset:0;
      width:100%; height:100%;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 30% 20%, #2a0f3a 0%, #000 55%, #000 100%);
    }

    /* Background video */
    video{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit:cover;
      filter: brightness(var(--video-dim)) saturate(var(--video-sat)) contrast(var(--video-contrast)) blur(var(--video-blur));
      transform: scale(1.01);
      z-index: 0;
    }

    /* Ensure overlay is always on top */
    .hud{
      position:absolute;
      left:var(--x);
      top:var(--y);
      z-index: 2;

      display:flex;
      flex-direction:column;
      gap:8px;
      align-items:flex-start;

      padding: var(--plate-pad-y) var(--plate-pad-x);
      border-radius: var(--plate-radius);
      background: var(--plate);
      border: 1px solid var(--plate-border);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 10px 30px rgba(0,0,0,.22);

      user-select:none;
      touch-action: manipulation;
    }

    .time{
      font-size:var(--time-size);
      font-weight:var(--time-weight);
      line-height:1;
      letter-spacing:-0.02em;
      color:var(--text);
      text-shadow:
        0 3px 18px var(--shadow),
        0 0 var(--glow) rgba(255,255,255,.14);
      -webkit-text-stroke: var(--stroke-w) var(--stroke);
    }

    .date{
      font-size:var(--date-size);
      font-weight:var(--date-weight);
      letter-spacing:0.02em;
      color:rgba(255,255,255,.92);
      text-shadow: 0 2px 14px var(--shadow);
      -webkit-text-stroke: 0.6px rgba(0,0,0,.25);
    }

    /* Debug badge (only shown if video errors) */
    .badge{
      position:absolute;
      right:12px;
      bottom:12px;
      z-index: 3;
      font-size: 12px;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,.45);
      border: 1px solid rgba(255,255,255,.18);
      color: rgba(255,255,255,.9);
      display:none;
    }

    .safe{
      padding-top: env(safe-area-inset-top);
      padding-left: env(safe-area-inset-left);
    }
  </style>
</head>
<body>
  <div class="stage safe">
    <video id="bg" autoplay muted loop playsinline preload="auto">
      <source src="./gengar.mp4" type="video/mp4" />
    </video>

    <div class="hud" id="hud" aria-label="Clock">
      <div class="time" id="time">--:--</div>
      <div class="date" id="date">---</div>
    </div>

    <div class="badge" id="badge">Video missing: gengar.mp4</div>
  </div>

  <script>
    const elTime = document.getElementById('time');
    const elDate = document.getElementById('date');

    function formatTime(d){
      // Intl is great, but fallback just in case embedded browser is weird
      try {
        return new Intl.DateTimeFormat(undefined, { hour:'numeric', minute:'2-digit' }).format(d);
      } catch(e) {
        let h = d.getHours(), m = String(d.getMinutes()).padStart(2,'0');
        const ampm = h >= 12 ? 'PM' : 'AM';
        h = h % 12; if (h === 0) h = 12;
        return `${h}:${m} ${ampm}`;
      }
    }

    function formatDate(d){
      try {
        return new Intl.DateTimeFormat(undefined, { weekday:'long', month:'long', day:'numeric' }).format(d);
      } catch(e) {
        return d.toDateString();
      }
    }

    function tick(){
      const now = new Date();
      elTime.textContent = formatTime(now);
      elDate.textContent = formatDate(now);
    }

    tick();
    setInterval(tick, 1000);

    // If video fails, show badge so you know itâ€™s a file/hosting issue
    const bg = document.getElementById('bg');
    const badge = document.getElementById('badge');
    bg.addEventListener('error', () => { badge.style.display = 'block'; });

    // Tap to toggle frosted plate
    const hud = document.getElementById('hud');
    hud.addEventListener('click', () => {
      const root = document.documentElement;
      const current = getComputedStyle(root).getPropertyValue('--plate').trim();
      const off = 'rgba(0, 0, 0, 0)';
      const on = 'rgba(0,0,0,.10)';
      root.style.setProperty('--plate', (current === off ? on : off));
      root.style.setProperty('--plate-border', (current === off ? 'rgba(255,255,255,.10)' : 'rgba(255, 255, 255, 0)'));
      root.style.setProperty('--plate-pad-x', (current === off ? '18px' : '0px'));
      root.style.setProperty('--plate-pad-y', (current === off ? '14px' : '0px'));
    }, {passive:true});
  </script>
</body>
</html>
